<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Guess the Number</title>
  <style>
    :root{
      --bg:#0b1020;--card:#111730;--muted:#7d8ab8;--accent:#7c9cff;--ok:#22c55e;--warn:#f59e0b;--bad:#ef4444;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial; 
      background:radial-gradient(1200px 600px at 80% -10%, #1d2750, transparent), var(--bg);
      color:#e7ecff; display:grid; min-height:100svh; place-items:center; padding:24px;
    }
    .card{
      width:min(680px, 92vw); background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.08); border-radius:20px; padding:22px; box-shadow:0 20px 50px rgba(0,0,0,.45);
      backdrop-filter: blur(8px);
    }
    h1{margin:6px 0 2px; font-weight:800; letter-spacing:.2px}
    p.sub{margin:2px 0 18px; color:var(--muted)}
    .row{display:flex; gap:14px; flex-wrap:wrap; align-items:center}
    .row > *{flex:1}
    .controls{display:flex; gap:10px; flex-wrap:wrap}
    select, input[type=number]{
      background:#0e1430; color:#e7ecff; border:1px solid rgba(255,255,255,.12); border-radius:12px;
      padding:10px 12px; font-size:16px; width:100%; outline: none;
    }
    input[type=number]{appearance:textfield}
    input::-webkit-outer-spin-button,input::-webkit-inner-spin-button{appearance:none; margin:0}
    button{
      background:var(--accent); border:none; color:#0b1020; font-weight:700; letter-spacing:.2px; 
      padding:12px 16px; border-radius:14px; cursor:pointer; transition:transform .06s ease, opacity .2s ease; 
      box-shadow:0 6px 20px rgba(124,156,255,.35);
    }
    button:hover{transform:translateY(-1px)}
    button:disabled{opacity:.55; cursor:not-allowed; transform:none; box-shadow:none}

    .statbar{
      display:grid; grid-template-columns:1fr 1fr; gap:10px; margin:14px 0 8px;
    }
    .stat{
      background:#0e1430; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px 12px; color:#cbd5ff;
    }
    .feedback{margin:14px 0 10px; min-height:28px; font-weight:700}
    .feedback.ok{color:var(--ok)}
    .feedback.warn{color:var(--warn)}
    .feedback.bad{color:var(--bad)}
    .range{color:#cbd5ff}
    .muted{color:var(--muted)}
    .footer{display:flex; gap:10px; justify-content:space-between; align-items:center; margin-top:14px; color:var(--muted)}
    .badgelite{background:#0e1430;border:1px solid rgba(255,255,255,.08);padding:6px 10px;border-radius:999px}
    .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); border:0}
    .tips{font-size:14px}
    @media (max-width:520px){.statbar{grid-template-columns:1fr}}
  </style>
</head>
  
  <!-- Music Control Button -->
<button id="toggleMusic" style="position:absolute; top:20px; right:20px; padding:8px 12px; border-radius:10px; background:var(--accent); color:#0b1020; border:none; cursor:pointer;">
  ðŸ”Š Music On
</button>
  
  <audio id="bgMusic" loop autoplay>
  <source src="retro-music.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>
  
<body>
  <main class="card" role="region" aria-labelledby="title">
    <h1 id="title">ðŸŽ¯ Guess the Number</h1>
    <p class="sub">Pick a difficulty, then guess the secret number. Lowest attempts = best score!</p>

    <section class="row" aria-label="Difficulty and custom settings">
      <label style="flex:1.2">
        <span class="sr-only">Difficulty</span>
        <select id="difficulty">
          <option value="easy">Easy (1â€“50 Â· 10 tries)</option>
          <option value="normal" selected>Normal (1â€“100 Â· 7 tries)</option>
          <option value="hard">Hard (1â€“100 Â· 5 tries)</option>
          <option value="custom">Customâ€¦</option>
        </select>
      </label>
      <label>
        <span class="sr-only">Min</span>
        <input id="min" type="number" placeholder="Min" value="1" disabled />
      </label>
      <label>
        <span class="sr-only">Max</span>
        <input id="max" type="number" placeholder="Max" value="100" disabled />
      </label>
      <label>
        <span class="sr-only">Tries</span>
        <input id="tries" type="number" placeholder="Tries" value="7" disabled />
      </label>
      <button id="newGameBtn" title="Start a new game">New Game</button>
    </section>

    <div class="statbar" aria-label="Game stats">
      <div class="stat">Range: <span class="range" id="rangeLabel">1â€“100</span></div>
      <div class="stat">Attempts left: <strong id="attemptsLeft">7</strong></div>
    </div>

    <section class="controls" aria-label="Make a guess">
      <label>
        <span class="sr-only">Your guess</span>
        <input id="guessInput" type="number" placeholder="Enter your guess" autocomplete="off" />
      </label>
      <button id="guessBtn">Guess</button>
      <button id="giveUpBtn" class="badgelite" title="Reveal the number">Give Up</button>
    </section>

    <div id="feedback" class="feedback" aria-live="polite"></div>

    <div class="footer">
      <div>
        Best score: <span id="bestScore" class="badgelite">â€“</span>
      </div>
      <div class="tips">Tip: Press <kbd>Enter</kbd> to submit your guess.</div>
    </div>
  </main>

  <script>
    // ===== Game State =====
    const difficultyEl = document.getElementById('difficulty');
    const minEl = document.getElementById('min');
    const maxEl = document.getElementById('max');
    const triesEl = document.getElementById('tries');
    const rangeLabel = document.getElementById('rangeLabel');
    const attemptsLeftEl = document.getElementById('attemptsLeft');
    const guessInput = document.getElementById('guessInput');
    const feedback = document.getElementById('feedback');
    const bestScore = document.getElementById('bestScore');
    const guessBtn = document.getElementById('guessBtn');
    const newGameBtn = document.getElementById('newGameBtn');
    const giveUpBtn = document.getElementById('giveUpBtn');

    let secret = 0, min = 1, max = 100, attemptsLeft = 7, totalAttempts = 7, isOver = false;

    const presets = {
      easy:   { min: 1, max: 50, tries: 10 },
      normal: { min: 1, max: 100, tries: 7 },
      hard:   { min: 1, max: 100, tries: 5 },
    };

    function rng(min, max){
      // inclusive range
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function saveBest(attemptsUsed){
      const key = `gtn_best_${difficultyEl.value}_${min}_${max}`;
      const current = Number(localStorage.getItem(key) || Infinity);
      if (attemptsUsed < current){
        localStorage.setItem(key, String(attemptsUsed));
      }
      updateBestBadge();
    }

    function updateBestBadge(){
      const key = `gtn_best_${difficultyEl.value}_${min}_${max}`;
      const v = localStorage.getItem(key);
      bestScore.textContent = v ? `${v} tries` : 'â€“';
    }

    function setCustomEnabled(on){
      [minEl, maxEl, triesEl].forEach(el => el.disabled = !on);
    }

    function applyDifficulty(){
      const mode = difficultyEl.value;
      if (mode === 'custom') {
        setCustomEnabled(true);
        min = Number(minEl.value || 1);
        max = Number(maxEl.value || 100);
        totalAttempts = Number(triesEl.value || 7);
      } else {
        setCustomEnabled(false);
        const p = presets[mode];
        min = p.min; max = p.max; totalAttempts = p.tries;
        minEl.value = min; maxEl.value = max; triesEl.value = totalAttempts;
      }
      rangeLabel.textContent = `${min}\u2013${max}`;
      attemptsLeftEl.textContent = totalAttempts;
    }

    function startNewGame(){
      applyDifficulty();
      attemptsLeft = totalAttempts;
      secret = rng(min, max);
      isOver = false;
      feedback.textContent = '';
      feedback.className = 'feedback';
      guessInput.value = '';
      guessInput.disabled = false;
      guessBtn.disabled = false;
      giveUpBtn.disabled = false;
      updateBestBadge();
      guessInput.focus();
      // console.log('Secret:', secret); // dev aid
    }

    function endGame(message, status){
      isOver = true;
      feedback.textContent = message;
      feedback.className = `feedback ${status||''}`;
      guessBtn.disabled = true;
      guessInput.disabled = true;
      giveUpBtn.disabled = true;
    }

    function handleGuess(){
      if (isOver) return;
      const val = Number(guessInput.value);
      if (!Number.isFinite(val)) {
        feedback.textContent = 'Enter a valid number.';
        feedback.className = 'feedback bad';
        return;
      }
      if (val < min || val > max){
        feedback.textContent = `Out of range! Guess between ${min} and ${max}.`;
        feedback.className = 'feedback warn';
        return;
      }
      attemptsLeft--;
      attemptsLeftEl.textContent = String(attemptsLeft);

      if (val === secret){
        const used = totalAttempts - attemptsLeft;
        saveBest(used);
        endGame(`ðŸŽ‰ Correct! ${val} was the number. You used ${used} ${used===1?'try':'tries'}.`, 'ok');
        return;
      }

      if (attemptsLeft <= 0){
        endGame(`ðŸ’¥ No tries left. The number was ${secret}.`, 'bad');
        return;
      }

      const hint = val < secret ? 'Too low' : 'Too high';
      const delta = Math.abs(val - secret);
      let heat = 'warn';
      if (delta <= Math.max(2, Math.floor((max-min)*0.02))) heat = 'ok'; // very close
      feedback.textContent = `${hint}! ${delta<=5? 'Very close. ':''}${attemptsLeft} ${attemptsLeft===1?'try':'tries'} left.`;
      feedback.className = `feedback ${heat}`;
      guessInput.select();
    }

    // ===== Event Listeners =====
    difficultyEl.addEventListener('change', startNewGame);
    [minEl,maxEl,triesEl].forEach(el => el.addEventListener('input', () => {
      if (difficultyEl.value === 'custom') {
        // keep labels live as user types
        applyDifficulty();
      }
    }));
    newGameBtn.addEventListener('click', startNewGame);
    guessBtn.addEventListener('click', handleGuess);
    giveUpBtn.addEventListener('click', () => endGame(`Revealed: ${secret}. Start a new game to try again.`, 'bad'));

    guessInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') handleGuess();
    });

    // Boot
    startNewGame();

const bgMusic = document.getElementById("bgMusic");
const toggleMusic = document.getElementById("toggleMusic");
let musicOn = true;

toggleMusic.addEventListener("click", () => {
  if (musicOn) {
    bgMusic.pause();
    toggleMusic.textContent = "ðŸ”ˆ Music Off";
  } else {
    bgMusic.play();
    toggleMusic.textContent = "ðŸ”Š Music On";
  }
  musicOn = !musicOn;
});


  </script>
</body>
</html>


